<!doctype html>
<html>
  <head>
    <title>Monitoring and Alerts</title>
    <link rel="stylesheet" href="../common.css">
  </head>
  <body>
    <h1>Monitoring and Alerts</h1>

	<h2>Docker Container Monitoring</h2>
	<table border="1" style="width: 100%;">
    <tr>
      <td style="width: 25%;"><b>Tool</b></td>
      <td style="width: 75%;"><b>Description</b></td>
    </tr>	
    <tr>
      <td>Prometheus</td>
	  <td>Systems and service monitoring and alerting toolkit</td>
    </tr>	
    <tr>
      <td>cAdvisor (container Advisor)</td>
	  <td>Collect and expose metrics from running containers</td>
    </tr>	
    <tr>
      <td>Node Exporter (for Prometheus)</td>
	  <td>Collect and expose hardware and OS metrics (CPU, Mem, Net, Disk)</td>
    </tr>	
    <tr>
      <td>PostgreSQL Exporter (for Prometheus)</td>
	  <td>Collect and expose metrics from a PostgreSQL database server</td>
    </tr>	
    <tr>
      <td>Redis Exporter (for Prometheus)</td>
	  <td>Collect and expose metrics from a Redis server</td>
    </tr>	
    <tr>
      <td>RabbitMQ Exporter (for Prometheus)</td>
	  <td>Collect and expose metrics from a RabbitMQ server</td>
    </tr>
    <tr>
      <td>Grafana</td>
	  <td>Create and manage dashboards to visualize the data (logs and metrics) and monitor the performance of Kubernetes clusters, databases</td>
    </tr>
    <tr>
      <td>Loki (for Grafana)</td>
	  <td>Log aggregation system that collects logs from various services into a central location</td>
    </tr>
    <tr>
      <td>Promtail (for Grafana)</td>
	  <td>Agent that ships local logs to a private Grafana Loki instance or Grafana Cloud</td>
    </tr>
    <tr>
      <td>Fluentd</td>
	  <td>Data collector that allows you to unify data collection and consumption</td>
    </tr>
    <tr>
      <td>Wazuh</td> 
	  <td>Collect, aggregate, index, analyze, monitor, detect, and alert security data<br>
	  - <b>Discover</b>: Index patterns: filebeat<br>
	  JSON / structured logging: <a href="https://www.elastic.co/guide/en/beats/filebeat/current/decode-json-fields.html">Decode JSON fields</a>: <i>fields: ["message"]</i> (filebeat.yml)<br>
	  Table: Toggle column in table<br>
	  - <b>Dashboards</b>: Filtering data using OpenSearch Query DSL<br>
	  <a href="https://documentation.wazuh.com/current/user-manual/wazuh-dashboard/creating-custom-dashboards.html">Creating custom dashboards</a>: StatusCode is 201
	  </td>
    </tr>
	</table>
	
	<h2>PG Stack</h2>
	P = Prometheus<br>
	G = Grafana<br>
	<p><center><img src="images\prometheus.png" width="75%" height="75%"/></center></p>
	
	<h2>Promtail - Loki</h2>
	<p><center><img src="images\promtail.png" width="75%" height="75%"/></center></p>
	<p>The containers (services) log to syslog (or standard output) and this is collected by Promtail/Filebeat and sent to the Loki/Wazuh log server, which Grafana can use as a data source.</p>
	
	<h2>ELK Stack</h2>
	E = ElasticSearch<br>
	L = Logstash<br>
	K = Kibana<br>
	<center><img src="images\elk.png" width="75%" height="75%"/></center>
	
	<h2>ELK - PG</h2>
	<center><img src="images\elk_pg.png" width="75%" height="75%"/></center>
	
  </body>
</html>


