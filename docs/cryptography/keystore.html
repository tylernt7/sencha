<!doctype html>
<html>
  <head>
    <title>KeyStore</title>
    <link rel="stylesheet" href="../common.css">	
  </head>
  <body>
    <h1>KeyStore</h1>
		
    <h2>Secure storages</h2>
	<b>Keystore</b> (Who I am) contains:
	<ul>
	<li>Private keys</li>
	<li>Certificates (including public keys)</li>
	<li><i>Optionally trusted certificates or secret keys</i></li>
	</ul>
	<b>Truststore</b> (Who I trust) contains:
	<ul>
	<li>Trusted public CA (Certificate Authority) root certificates from external parties</li>
	<li><i>Optionally intermediate certificates</i></li>
	</ul>
	
	<h2>jdk/lib/security/cacerts</h2>
	<ul>
	<li>It is a Truststore to verify the identity of remote servers during SSL/TLS handshakes</li>
	<li>The default password is <i>changeit</i></li>
	<li>Java 8: JKS format</li>
	<li>Java 9+: PKCS12 format</li>
	<li>Newer Java versions may include updated or additional CA certificates</li>
	<li>If you set <i>-Djavax.net.ssl.trustStore</i> then the default <b>cacerts</b> will be completely ignored</li>
	</ul>
	
	<h2>Keytool commands</h2>
    <table border="1"><thead>
      <tr>
        <th>Usage</th>
        <th>Description</th>
      </tr></thead>
    <tbody>
      <tr>
        <td>keytool -list -v -keystore $JAVA_HOME/lib/security/cacerts -storepass changeit</td>
        <td>List certificates in the cacerts truststore</td>
      </tr>
      <tr>
        <td>keytool -importkeystore -srckeystore $JAVA_HOME/lib/security/cacerts -srcstoretype JKS -destkeystore truststore.jks -deststoretype JKS </td>
        <td>Import the contents of cacerts into your the truststore </td>
      </tr>
      <tr>
        <td>keytool -import -trustcacerts -alias myserver -file server-cert.pem -keystore truststore.jks</td>
        <td>Import a certificate into a truststore</td>
      </tr>
      <tr>
        <td>keytool -delete -alias myserver -keystore truststore.jks</td>
        <td>Delete a certificate from a truststore</td>
      </tr>
    </tbody>
    </table>	

	
  </body>
</html>